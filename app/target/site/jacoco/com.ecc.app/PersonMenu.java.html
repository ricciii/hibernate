<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PersonMenu.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">app</a> &gt; <a href="index.source.html" class="el_package">com.ecc.app</a> &gt; <span class="el_source">PersonMenu.java</span></div><h1>PersonMenu.java</h1><pre class="source lang-java linenums">package com.ecc.app;

import java.util.Scanner;
import org.hibernate.HibernateException; 
import org.hibernate.Session; 
import org.hibernate.Transaction;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import java.util.GregorianCalendar;
import java.util.Calendar;
import java.util.InputMismatchException;
import java.util.HashSet;
import java.util.List;
import java.util.ArrayList;

public class PersonMenu implements Menu {
	
	private PersonService personService;
	private RoleService roleService;
	private InputProvider scanner;
	private GeneratorService generator;

<span class="nc" id="L23">	public PersonMenu(PersonService personService, RoleService roleService, InputProvider scanner, GeneratorService generator) {</span>
<span class="nc" id="L24">		this.personService = personService;</span>
<span class="nc" id="L25">    	this.roleService = roleService;</span>
<span class="nc" id="L26">    	this.scanner = scanner;</span>
<span class="nc" id="L27">    	this.generator = generator;</span>
<span class="nc" id="L28">	}</span>

	public void start() {
		int choice;
    	String string;
<span class="nc" id="L33">    	boolean done = false;</span>
<span class="nc" id="L34">    	Integer personId = null;</span>
<span class="nc" id="L35">    	Integer roleId = null;</span>
    	Person person;
    	Role role;
    	do {
<span class="nc" id="L39">    		System.out.println(&quot;\n&lt;--- PERSON TABLE ---&gt;\n&quot;);</span>
<span class="nc" id="L40">	    	System.out.println(&quot;1=CREATE 2=READ 3=UPDATE 4=DELETE 5=BACK&quot;);</span>
<span class="nc" id="L41">	    	System.out.print(&quot;What do you want to do: &quot;);</span>
	    	try {
<span class="nc" id="L43">	    		choice = scanner.getInt();</span>
<span class="nc bnc" id="L44" title="All 6 branches missed.">	    		switch(choice) {</span>
	    			case 1:
<span class="nc" id="L46">	    				person = generator.generatePerson(roleService);</span>
<span class="nc" id="L47">	    				boolean created = personService.create(person);</span>
<span class="nc bnc" id="L48" title="All 2 branches missed.">	    				if(created) {</span>
<span class="nc" id="L49">	    					System.out.print(&quot;Person successfully created.&quot;);</span>
	    				} else {
<span class="nc" id="L51">	    					System.out.print(&quot;Person unsuccessfully created.&quot;);</span>
	    				}
<span class="nc" id="L53">	    				break;</span>
	    			case 2:
<span class="nc" id="L55">	    				showReadAllPersonByMenu();</span>
<span class="nc" id="L56">	    				break;</span>
	    			case 3:
<span class="nc" id="L58">	    				System.out.print(&quot;Input the ID of the Person you want to update: &quot;);</span>
<span class="nc" id="L59">	    				personId = generator.generateId();</span>
<span class="nc" id="L60">	    				person = personService.getPersonWithId(personId);</span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">	    				if(person == null) {</span>
<span class="nc" id="L62">	    					System.out.print(&quot;Person with ID: &quot; + personId + &quot; does not exist.&quot;);</span>
	    				} else {
<span class="nc" id="L64">	    					showUpdatePersonMenu(person, personId);</span>
	    				}
<span class="nc" id="L66">	    				break;</span>
	    			case 4:
<span class="nc" id="L68">	    				System.out.print(&quot;Input the ID of the Person you want to delete: &quot;);</span>
<span class="nc" id="L69">	    				personId = generator.generateId();</span>
<span class="nc" id="L70">	    				person = personService.getPersonWithId(personId);</span>
<span class="nc" id="L71">	    				boolean deleted = personService.delete(person);</span>
<span class="nc bnc" id="L72" title="All 2 branches missed.">	    				if(deleted) {</span>
<span class="nc" id="L73">	    					System.out.print(&quot;Person successfully deleted.&quot;);</span>
	    				} else {
	    					
<span class="nc" id="L76">	    					System.out.print(&quot;Person was deleted unsuccessfully.&quot;);</span>
	    				}
<span class="nc" id="L78">	    				break;</span>
	    			case 5:
<span class="nc" id="L80">	    				done = true; </span>
<span class="nc" id="L81">	    				break;</span>
	    			default: 
<span class="nc" id="L83">	    				System.out.println(&quot;Not in the choices, try again.&quot;);</span>
	    		}
<span class="nc" id="L85">	    	} catch(Exception e) {</span>
<span class="nc" id="L86">	    		System.out.print(e);</span>
<span class="nc" id="L87">	    	}</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">    	} while(done==false);</span>
<span class="nc" id="L89">	}</span>

	public void showReadAllPersonByMenu() {
    	int choice;
<span class="nc" id="L93">    	boolean done = false;</span>
<span class="nc" id="L94">    	List&lt;Person&gt; persons = new ArrayList();</span>
    	do {
<span class="nc" id="L96">    		System.out.println(&quot;\n&lt;-- READING PERSON MENU --&gt;\n&quot;);</span>
<span class="nc" id="L97">	    	System.out.println(&quot;1=Default 2=BY GWA 3=BY LAST NAME 4=BY DATE HIRED 5=EXIT&quot;);</span>
<span class="nc" id="L98">	    	System.out.print(&quot;Which reading do you want to do: &quot;);</span>
	    	try {
<span class="nc" id="L100">	    		choice = scanner.getInt();</span>
<span class="nc bnc" id="L101" title="All 6 branches missed.">	    		switch(choice) {</span>
	    			case 1:
<span class="nc" id="L103">	    				System.out.println(&quot;Reading all Person by Default: &quot;);</span>
<span class="nc" id="L104">	    				persons = personService.getPersonsAsList(PersonService.ListingOrder.DEFAULT);</span>
<span class="nc" id="L105">	    				done = true;</span>
<span class="nc" id="L106">	    				break;</span>
	    			case 2:
<span class="nc" id="L108">	    				System.out.println(&quot;Reading all Person by ASC GWA: &quot;);</span>
<span class="nc" id="L109">	    				persons = personService.getPersonsAsList(PersonService.ListingOrder.GWA);</span>
<span class="nc" id="L110">	    				done = true;</span>
<span class="nc" id="L111">	    				break;</span>
	    			case 3:
<span class="nc" id="L113">	    				System.out.println(&quot;Reading all Person by ASC Last Name: &quot;);</span>
<span class="nc" id="L114">	    				persons = personService.getPersonsAsList(PersonService.ListingOrder.LASTNAME);</span>
<span class="nc" id="L115">	    				done = true;</span>
<span class="nc" id="L116">	    				break;</span>
	    			case 4:
<span class="nc" id="L118">	    				System.out.println(&quot;Reading all Person by DESC Date Hired: &quot;);</span>
<span class="nc" id="L119">	    				persons = personService.getPersonsAsList(PersonService.ListingOrder.DATEHIRED);</span>
<span class="nc" id="L120">	    				done = true;</span>
<span class="nc" id="L121">						break;</span>
	    			case 5:
<span class="nc" id="L123">	    				done = true;</span>
<span class="nc" id="L124">	    				break;</span>
	    			default: 
<span class="nc" id="L126">	    				System.out.println(&quot;Not in the choices, try again.&quot;);</span>
	    		}
<span class="nc" id="L128">	    	} catch(Exception exception) {</span>
<span class="nc" id="L129">	    		System.out.print(exception);</span>
<span class="nc" id="L130">	    	}</span>
<span class="nc" id="L131">	    	System.out.println(&quot;\n&lt;--- READING PERSON TABLE ---&gt;&quot;);</span>
<span class="nc" id="L132">	    	personService.read(persons);</span>
<span class="nc bnc" id="L133" title="All 2 branches missed.">    	} while(done==false);</span>
<span class="nc" id="L134">    }</span>

    // THE PERSON HERE SHOULD EXIST ALREADY
    public void showUpdatePersonMenu(Person person, Integer personId) {
    	int choice;
<span class="nc" id="L139">    	boolean done = false;</span>
<span class="nc" id="L140">    	boolean updated = false;</span>
<span class="nc" id="L141">    	boolean skip = false;</span>
    	do {
<span class="nc" id="L143">    		System.out.println(&quot;\n&lt;-- UPDATE PERSON MENU --&gt;\n&quot;);</span>
<span class="nc" id="L144">    		System.out.println(&quot;Person Information: &quot;);</span>
<span class="nc" id="L145">    		personService.readPerson(personId);</span>
<span class="nc" id="L146">	    	System.out.print(&quot;1=Name 2=Address 3=Date of Birth 4=GWA 5=Date Hired\n&quot; + </span>
	    		&quot;6=Currently Employed 7=Contact Info 8=Roles 9=EXIT\n&quot;);
<span class="nc" id="L148">	    	System.out.print(&quot;Which field do you want to update: &quot;);</span>
	    	try {
<span class="nc" id="L150">	    		choice = scanner.getInt();</span>
<span class="nc bnc" id="L151" title="All 10 branches missed.">	    		switch(choice) {</span>
	    			case 1:
<span class="nc" id="L153">	    				Name name = generator.generateName();</span>
<span class="nc" id="L154">	    				person.setName(name);</span>
<span class="nc" id="L155">	    				break;</span>
	    			case 2:
<span class="nc" id="L157">	    				Address address = generator.generateAddress();</span>
<span class="nc" id="L158">	    				person.setAddress(address);</span>
<span class="nc" id="L159">	    				break;</span>
	    			case 3:
<span class="nc" id="L161">	    				GregorianCalendar dateOfBirth = generator.generateDateOfBirth();</span>
<span class="nc" id="L162">	    				person.setDateOfBirth(dateOfBirth);</span>
<span class="nc" id="L163">	    				break;</span>
	    			case 4:
<span class="nc" id="L165">	    				float gwa = generator.generateGwa();</span>
<span class="nc" id="L166">	    				person.setGwa(gwa);</span>
<span class="nc" id="L167">	    				break;</span>
	    			case 5:
<span class="nc" id="L169">	    				GregorianCalendar dateHired = generator.generateDateHired();</span>
<span class="nc" id="L170">	    				person.setDateHired(dateHired);</span>
<span class="nc" id="L171">	    				break;</span>
	    			case 6:
<span class="nc" id="L173">	    				boolean currentlyEmployed = generator.generateCurrentlyEmployed();</span>
<span class="nc" id="L174">	    				person.setCurrentlyEmployed(currentlyEmployed);</span>
<span class="nc" id="L175">	    				break;</span>
	    			case 7:
<span class="nc" id="L177">	    				showUpdatePersonContactsMenu(person, personId);</span>
<span class="nc" id="L178">	    				skip = true;</span>
<span class="nc" id="L179">	    				break;</span>
	    			case 8:
<span class="nc" id="L181">	    				showUpdatePersonRolesMenu(person, personId);</span>
<span class="nc" id="L182">	    				skip = true;</span>
<span class="nc" id="L183">	    				break;</span>
	    			case 9:
<span class="nc" id="L185">	    				skip = true;</span>
<span class="nc" id="L186">	    				done = true; </span>
<span class="nc" id="L187">	    				break;</span>
	    			default: 
<span class="nc" id="L189">	    				System.out.println(&quot;Not in the choices, try again.&quot;);</span>
<span class="nc" id="L190">	    				skip = true;</span>
	    		}
<span class="nc bnc" id="L192" title="All 2 branches missed.">    			if(skip == false) {</span>
<span class="nc" id="L193">					updated = personService.update(person);</span>
<span class="nc bnc" id="L194" title="All 2 branches missed.">    				if(updated) {</span>
<span class="nc" id="L195">    					System.out.println(&quot;Person successfully updated.&quot;);</span>
    				} else {
<span class="nc" id="L197">    					System.out.println(&quot;Person unsuccessfully updated.&quot;);</span>
    				}
    			} 
<span class="nc" id="L200">    			skip = false;</span>
<span class="nc" id="L201">	    	} catch(Exception exception) {</span>
<span class="nc" id="L202">	    		System.out.print(exception);</span>
<span class="nc" id="L203">	    	} </span>

<span class="nc bnc" id="L205" title="All 2 branches missed.">    	} while(done==false);</span>
<span class="nc" id="L206">    }</span>

    public void showUpdatePersonContactsMenu(Person person, Integer personId) {
    	int choice;
<span class="nc" id="L210">    	Integer contactId = null;</span>
<span class="nc" id="L211">    	boolean done = false;</span>
    	do {
<span class="nc" id="L213">    		personService.readPerson(personId);</span>
<span class="nc" id="L214">    		System.out.println(&quot;\n&lt;-- UPDATE PERSON CONTACTS MENU --&gt;\n&quot;);</span>
<span class="nc" id="L215">    		System.out.println(&quot;Updating Contacts of Person with ID: &quot; + personId);</span>
<span class="nc" id="L216">	    	System.out.println(&quot;1=Add Contact 2=Delete Contact 3=EXIT&quot;);</span>
<span class="nc" id="L217">	    	System.out.print(&quot;What do you want to do: &quot;);</span>
	    	try {
<span class="nc" id="L219">	    		choice = scanner.getInt();</span>
<span class="nc bnc" id="L220" title="All 4 branches missed.">	    		switch(choice) {</span>
	    			case 1:
<span class="nc" id="L222">	    				System.out.println(&quot;Adding contact: &quot;);</span>
<span class="nc" id="L223">	    				HashSet contacts = generator.generateContacts();</span>
<span class="nc" id="L224">	    				person.getContacts().addAll(contacts);</span>
<span class="nc" id="L225">	    				boolean added = personService.update(person);</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">	    				if(added) {</span>
<span class="nc" id="L227">							System.out.println(&quot;Successfully added contact/s.&quot;);</span>
	    				} else {
<span class="nc" id="L229">	    					System.out.println(&quot;Contact/s was unsuccessfully added.&quot;);</span>
	    				}
<span class="nc" id="L231">	    				break;</span>
	    			case 2:
<span class="nc" id="L233">	    				System.out.print(&quot;Input the ID of the contact you want to delete: &quot;);</span>
<span class="nc" id="L234">	    				contactId = generator.generateId();</span>
<span class="nc" id="L235">	    				Contact contact = personService.getContactWithId(contactId);</span>
<span class="nc bnc" id="L236" title="All 2 branches missed.">	    				if(contact==null) {</span>
<span class="nc" id="L237">	    					System.out.println(&quot;Role does not exist&quot;);</span>
	    				} else {
<span class="nc" id="L239">	    					person.getContacts().remove(contact);</span>
<span class="nc" id="L240">	    					boolean deleted = personService.update(person);</span>
<span class="nc bnc" id="L241" title="All 2 branches missed.">	    					if(deleted) {</span>
<span class="nc" id="L242">	    					System.out.println(&quot;Successfully deleted contact.&quot;);</span>
	    					} else {
<span class="nc" id="L244">	    						System.out.println(&quot;Contact was unsuccessfully deleted.&quot;);</span>
	    					}
	    				}
<span class="nc" id="L247">	    				break;</span>
	    			case 3:
<span class="nc" id="L249">	    				done = true;</span>
<span class="nc" id="L250">	    				break;</span>
	    			default: 
<span class="nc" id="L252">	    				System.out.println(&quot;Not in the choices, try again.&quot;);</span>
	    		}
<span class="nc" id="L254">	    	} catch(Exception exception) {</span>
<span class="nc" id="L255">	    		System.out.print(exception);</span>
<span class="nc" id="L256">	    	}</span>
<span class="nc bnc" id="L257" title="All 2 branches missed.">    	} while(done==false);</span>
<span class="nc" id="L258">    }</span>

    public void showUpdatePersonRolesMenu(Person person, Integer personId) {
    	int choice;
<span class="nc" id="L262">    	Integer roleId = null;</span>
<span class="nc" id="L263">    	boolean done = true;</span>
<span class="nc" id="L264">    	Role role = new Role();</span>
    	HashSet roles;
<span class="nc" id="L266">    	personService.readPerson(personId);</span>
    	do {
<span class="nc" id="L268">    		System.out.println(&quot;\n&lt;-- UPDATE PERSON ROLES MENU --&gt;\n&quot;);</span>
<span class="nc" id="L269">    		System.out.println(&quot;Updating Roles of Person with ID: &quot; + personId);</span>
<span class="nc" id="L270">	    	System.out.println(&quot;1=Assign Role 2=Unassign Role 3=EXIT&quot;);</span>
<span class="nc" id="L271">	    	System.out.print(&quot;What do you want to do: &quot;);</span>
	    	try {
<span class="nc" id="L273">	    		choice = scanner.getInt();</span>
<span class="nc bnc" id="L274" title="All 4 branches missed.">	    		switch(choice) {</span>
	    			case 1:
<span class="nc" id="L276">	    				roles = generator.generateRoles(roleService);</span>
<span class="nc" id="L277">	    				person.getRoles().addAll(roles);</span>
<span class="nc" id="L278">	    				boolean assigned = personService.update(person);</span>
<span class="nc bnc" id="L279" title="All 2 branches missed.">	    				if(assigned) {</span>
<span class="nc" id="L280">	    					System.out.println(&quot;Successfully assigned role.&quot;);</span>
	    				} else {
<span class="nc" id="L282">	    					System.out.println(&quot;Role was unsuccessfully added.&quot;);</span>
	    				}
<span class="nc" id="L284">	    				break;</span>
	    			case 2:
<span class="nc" id="L286">	    				System.out.print(&quot;Input the Role ID you want to delete: &quot;);</span>
<span class="nc" id="L287">	    				roleId = generator.generateId();</span>
<span class="nc" id="L288">	    				role = roleService.getRoleWithId(roleId);</span>
<span class="nc bnc" id="L289" title="All 2 branches missed.">	    				if(role==null) {</span>
<span class="nc" id="L290">	    					System.out.println(&quot;Role does not exist&quot;);</span>
	    				} else {
<span class="nc" id="L292">	    					person.getRoles().remove(role);</span>
<span class="nc" id="L293">	    					boolean deleted = personService.update(person);</span>
<span class="nc bnc" id="L294" title="All 2 branches missed.">	    					if(deleted) {</span>
<span class="nc" id="L295">	    					System.out.println(&quot;Successfully deleted role.&quot;);</span>
	    					} else {
<span class="nc" id="L297">	    						System.out.println(&quot;Role was unsuccessfully deleted.&quot;);</span>
	    					}
	    				}
<span class="nc" id="L300">	    				break;</span>
	    			case 3:
<span class="nc" id="L302">	    				done = true;</span>
<span class="nc" id="L303">	    				break;</span>
	    			default: 
<span class="nc" id="L305">	    				System.out.println(&quot;Not in the choices, try again.&quot;);</span>
	    		}
<span class="nc" id="L307">	    	} catch(Exception exception) {</span>
<span class="nc" id="L308">	    		System.out.print(exception);</span>
<span class="nc" id="L309">	    	}</span>
<span class="nc bnc" id="L310" title="All 2 branches missed.">    	} while(done==false);</span>
<span class="nc" id="L311">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>